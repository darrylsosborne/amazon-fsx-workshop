= Create file system from backup
:toc:
:icons:
:linkattrs:
:imagesdir: ../../resources/images

This section will create a new file system from a backup.

You can use an available backup to create a new file system, effectively restoring a point-in-time snapshot of another file system.

== Diagram

image::create-file-system-from-backup.png[align="left", width=600]


== Step-by-step Guide

* Open the link:https://aws.amazon.com/fsx/[Amazon FSx] console.

* *_Select_* the *File system name* or the *File system ID* of file system created by the CloudFormation template. The file system name is "*Amazon FSx for Windows File Server 0*".
* From the *details* view, *_select_* the *Backups* tab.
* *_Click_* the check box next to the *Automatic* backup taken of the file system after it was created.
* *_Select_* the *Restore backup* button.
* *_Complete_* the *Create file system from backup...* wizard with the following settings:


|===
| File system details | Value
| *File system name*
a| Amazon FSx for Windows File Server 1

| *Storage capacity*
a| Immutable when restoring a backup

| *Throughput capacity*
a| 64 MB/s
|===


|

| *Availability Zones*
a| Select two (2) availability zones for your VPC.

| *Email address*
a| Enter the email address that will receive notifications for low free storage capacity CloudWatch alarms. Important! An AWS Notification Subscription Confirmation email will be sent to this email address when the CloudFormation stack is created. You must take the action described in that email to confirm the SNS topic subscription before the email address can start receiving alarm notifications.

|===


| Network & security | Value |
| :--- | :---
| Virtual private cloud (VPC) | Accept the default |
| Availability zone | Select a different Availability Zone from the default |
| Subnet | Accept the default |
| VPC Security Groups | Accept the default |


| Windows authentication | Value |
| :--- | :---
| Microsoft Active Directory ID | Accept the default |


| Encryption | Value |
| :--- | :---
| Encryption key | Accept the default |


| Maintenance preferences | Value |
| :--- | :---
| Daily automatic backup window | No preference |
| Automatic backup retention period | 0 days (this disables automatic backups) |
| Weekly maintenance window | No preference |


- Select **Review summary**

- Review the file system attributes & estimated monthly costs

- Select **Create file system**





=== Parameters

[cols="3,10"]
|===

| *VPC CIDR*
a| Select a CIDR that will be used for the VPC.

| *Availability Zones*
a| Select two (2) availability zones for your VPC.

| *Email address*
a| Enter the email address that will receive notifications for low free storage capacity CloudWatch alarms. Important! An AWS Notification Subscription Confirmation email will be sent to this email address when the CloudFormation stack is created. You must take the action described in that email to confirm the SNS topic subscription before the email address can start receiving alarm notifications.

|===

* After you have entered values for all parameters, *_click_* *Next*.
* *_Accept_* the default values of the *Configure stack options* and *Advanced options* sections and *_click_* *Next*.
* *_Review_* the CloudFormation stack settings.
* *_Click_* both checkboxes in the blue *Capabilities* box at the bottom of the page.

image::cloudformation-capabilities.png[align="left", width=420]

* *_Click_* *Create stack*.

== Next section

Click the button below to go to the next section.

image::02-create-file-server-from-backup.png[link=../02-create-file-server-from-backup/, align="left",width=420]






:toc:
:icons:
:linkattrs:
:imagesdir: ../../resources/images

image:cw-monitoring-tutorial.png[align="left",width=420]

This tutorial is designed for architects and engineers who would like to learn more about monitoring FSx for Windows File Servers using CloudWatch.

= Step-by-step Guide

== CloudFormation

* Click on the *"Deploy to AWS"* button and follow the CloudFormation prompts to begin.

[NOTE]
Amazon FSx is currently available in 6 regions. Please choose the same region where you have your FSx for Windows File Server.

|===

|Region | Launch template with a new VPC
| *N. Virginia* (us-east-1)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]

| *Ohio* (us-east-2)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-east-2#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]

| *Oregon* (us-west-2)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=us-west-2#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]

| *Ireland* (eu-west-1)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=eu-west-1#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]

| *Sydney* (ap-southeast-2)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=ap-southeast-2#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]

| *Tokyo* (ap-northeast-1)
a| image::deploy-to-aws.png[link=https://console.aws.amazon.com/cloudformation/home?region=ap-northeast-1#/stacks/new?stackName=fsx-monitoring-tutorial&templateURL=https://s3.amazonaws.com/amazon-fsx/tutorial/windows/templates/fsx-cw-dashboard.yaml]


|===

=== Specify stack details

* Accept the default stack name and *_click_* *Next*. *_Enter_* values for all parameters.


=== Parameters

[cols="3,10"]
|===

| *File system ID*
a| Enter the file system id of the FSx for Windows File Server (e.g. fs-0123456789abcdef0).

| *Threshold*
a| Enter the low free storage capacity threshold value in bytes. If the current free storage capacity of the file system drops below this value, CloudWatch alarms will send an email notification to the email address below.

| *Email address*
a| Enter the email address that will receive notifications for low free storage capacity CloudWatch alarms. Important! An AWS Notification Subscription Confirmation email will be sent to this email address when the CloudFormation stack is created. You must take the action described in that email to confirm the SNS topic subscription before the email address can start receiving alarm notifications.

|===

* After you have entered values for all parameters, *_click_* *Next*.
* *_Accept_* the default values of the *Configure stack options* and *Advanced options* sections and *_click_* *Next*.
* *_Review_* the CloudFormation stack settings and *_click_* *Create stack*.


=== Example dashboard screenshot

Below is an example of the CloudWatch dashboard created from the template.

image::fsx-cw-dashboard.png[align="left",width=840]



NOTE: You will incur charges as you go through these tutorials as it will exceed the link:http://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/free-tier-limits.html[limits of AWS free tier].

== Participation

We encourage participation; if you find anything, please submit an issue. However, if you want to help raise the bar, **submit a PR**!

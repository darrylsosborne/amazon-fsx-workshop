= Map Default File Share
:toc:
:icons:
:linkattrs:
:imagesdir: ../resources/images


== Summary

This section will map the Amazon FSx for Windows File Server default file share on an Amazon EC2 Windows instance.


== Duration

NOTE: It will take approximately 5 minutes to complete this section.


== Step-by-step Guide

=== Connect to the Windows Instance

IMPORTANT: Read through all steps below and watch the quick video before continuing.

image::connect-windows-instance.gif[align="left", width=600]


. Open the link:https://console.aws.amazon.com/ec2/[Amazon EC2] console.
+
TIP: *_Context-click (right-click)_* the link above and open the link in a new tab or window to make it easy to navigate between this github workshop and AWS console.
+
. Make sure you are in the same *AWS Region* as the workshop environment.

. *_Select_* *Running Instances*.

. *_Select_* the radio button next to the instance with the name *Windows Instance*.

. Copy the *Public DNS (IPv4)* name of the *Windows Instance* instance.

. Launch your remote desktop application and create a new connection.

. Use the DNS name copied above as the host name of the new connection.

. Start a new remote desktop session to the new connection (you will retrieve the *user name* and *password* from *AWS Secrets Manager*).

. Open the link:https://console.aws.amazon.com/secretsmanager/[AWS Secrets Manager] console.
+
TIP: *_Context-click (right-click)_* the link above and open the link in a new tab or window to make it easy to navigate between this github workshop and AWS console.
+
. *_Select_* the *Secret name* link for *Password-<GUID>*.

. *_Scroll_* to the *Secret value* section and *_click_* the *Retrieve secret value* button.

. Use the *Secret key/value* pairs of *username* and *password* as the credentials to authenticate to the *Windows Instance* instance for the remote desktop session.

=== Map default file share

IMPORTANT: Read through all steps below and watch the quick video before continuing.

image::map-default-file-share.gif[align="left", width=600]


. Once you've logged on to the *Windows Instance* instance, *_launch_* *File Explorer*.

. *_Context-click (right-click)_* *This PC* and *_select_* *Map network drive...*

. Map the file share using the following information:
+
[cols="3,10"]
|===
| *Drive*
a| Z:

| *Folder*
a| This is the UNC path of the file system's default file share. From the link:https://console.aws.amazon.com/fsx/[Amazon FSx] console, *_click_* the link to the *MAZ* file system and *_select_* the *Network & security* tab. *_Copy_* the *DNS Name* of the file system to the clipboard and paste it as the first part of the UNC path. *_Add_* *\share* to the end of the *DNS Name* to complete the UNC path to the file system's default file share (e.g. \\fs-0123456789abcdef.example.com\share).

| *Reconnect at sign-in*
a| Leave checked

| *Connect using different credentials*
a| Leave unchecked
|===
+
. In the *File Explorer* window of the *Z:* drive, create new test files. *_Context-click (right-click)_* >> *New* >> *Text Document*. Create a few different types of test files.

. Load sample data into the file system's default file share from the link:https://registry.opendata.aws/nasanex/[NASA NEX] project hosted on the registry of Open Data on AWS.

* Go to the remote desktop session for your *Windows Instance*.

* *_Click_* *Start* >> *Windows PowerShell*.

* *_Run_* the script in the *Windows PowerShell* window.
+
[source,bash]
----
Read-S3Object -BucketName nasanex -KeyPrefix /AVHRR -Folder Z:/nasanex/AVHRR

----
+

NOTE: It will take approximately 20 minutes to load this sample data. Continue with the next section while the data is loaded in the background.


== Next section

Click the link below to go to the next section.

image::create-new-file-shares.png[link=../03-create-new-file-shares/, align="left",width=420]




